# Problem2 baseball 選手管理アプリ

# URL

[https://github.com/Aivyss/SCIT/tree/master/Problem2/src/global/sesoc/baseball](https://github.com/Aivyss/SCIT/tree/master/Problem2/src/global/sesoc/baseball)

# 目標 1

ui 클래스에서 모든 예외처리는 생성자부에서 한다. 다른 메소드에서 예외가 발생할 경우 전부 생성자로 넘긴다.

# 目標 2

vo클래스를 기반한 객체를 만들기 위해 필요한 정보는 integer, double, String 타입의 변수들이 필요하고 이를 하나하나 매개변수로 하는 것은 복잡하므로 한번에 옮기는 방법을 구현한다.

# 目標 3

for each문의 연습을 위해 최대한 for each문으로 구현한다.

# 注目 1 : toString()

- 부모 자식간의 method override와 Up/Down casting의 이해에 중점을 둔다.
- cf ) toString()은 자바내에서 단순히 객체명만 적어도 실행하도록 되어 있다.

# まとめ : 継承について

## Parent p = new Child();

### p (NOT CASTED) (Hiding child components)

- `member variable` → only parent variables
- `method`
parent methods & overrided child methods

### p (CASTED to Child object)

- `member variable` → all variables
- `method`→ all methods

## Parent p = new Parent();

### p (NOT CASTED)

- `member variable` → Only parent variables
- `method`→Only Parent methods

### p (CASTED to Child object)

- Can't Casted (Compile ERROR)

# Code

## Main Package

```java
package global.sesoc.baseball.main;

import global.sesoc.baseball.ui.BaseballUI;

/**
 * 프로그램의 시작
 */
public class BaseballMain {

	public static void main(String[] args) {
			new BaseballUI();
	}

}
```

## UI package

```java
package global.sesoc.baseball.ui;

import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.List;
import java.util.Scanner;

import global.sesoc.baseball.manager.BaseballManager;
import global.sesoc.baseball.vo.Batter;
import global.sesoc.baseball.vo.Pitcher;
import global.sesoc.baseball.vo.Player;

/**
 * 사용자 인터페이스
 */
public class BaseballUI {
	private Scanner input = new Scanner(System.in);
	private BaseballManager manager = new BaseballManager();

	/**
	 * 생성자
	 */
	public BaseballUI()  {
		int menuNum = -1;

		// 프로그램 종료시까지 무한 반복
		while (true) {
			this.printMainMenu();
			try {
				menuNum = this.inputInteger();
				if (menuNum == 1) {
					this.add();
				} else if (menuNum == 2) {
					this.delete();
				} else if (menuNum == 3) {
					this.update();
				} else if (menuNum == 4) {
					this.search();
				} else if (menuNum == 0) {
					this.exit();
					break;
				} else {
					System.out.println("[오류] 다시 선택하세요.");
					System.out.println("=======[구분선]=======");
				}
			} catch (InputMismatchException e) {
				e = new InputMismatchException("[오류] 입력형식이 잘못되었습니다");
				System.out.println(e.getMessage());
			} 		
		}
	}

	/**
	 * 메인 메뉴 출력
	 */
	public void printMainMenu() {
		System.out.println("[  야구 선수 정보 관리   ]");
		System.out.println("1. 선수 정보 입력");
		System.out.println("2. 선수 정보 삭제");
		System.out.println("3. 선수 정보 수정");
		System.out.println("4. 검색");
		System.out.println("0. 프로그램 종료");
		System.out.print("** 번호 선택 >");
	}

	/**
	 * 선수 정보 입력
	 */
	public void add() throws InputMismatchException {
		System.out.print("선수 고유 번호 > ");
		String id = this.inputString();

		if (manager.searchId(id) != null) {
			System.out.println("[알림] 이미 존재하는 번호입니다.");
		} else {
			// 선수 포지션 선택화면 출력
			System.out.println("[  선수 등록  ]");
			System.out.println("1. 투수");
			System.out.println("2. 타자");
			System.out.print("** 선수 구분 선택 > ");
			int selector = this.inputInteger();
			
			// 변수 정의
			List<Object> playerInfo = new ArrayList<>();		
			Player vo = null;
			
			playerInfo.add(id);
			System.out.print("선수 이름 > ");
			playerInfo.add(this.inputString());
			System.out.print("소속팀 > ");
			playerInfo.add(this.inputString());
			System.out.print("연봉 > ");
			playerInfo.add(this.inputInteger());
			System.out.print("WAR > ");
			playerInfo.add(this.inputDouble());
			
			if (selector == 1) {
				System.out.print("평균 자책 > ");
				playerInfo.add(this.inputDouble());
				System.out.print("이닝 > ");
				playerInfo.add(this.inputInteger());
				System.out.print("승 > ");
				playerInfo.add(this.inputInteger());
				System.out.print("패 > ");
				playerInfo.add(this.inputInteger());
				System.out.print("세이브 > ");
				playerInfo.add(this.inputInteger());
				System.out.print("홀드 > ");
				playerInfo.add(input.nextInt());
				
				vo = new Pitcher(playerInfo);
				manager.insertPlayer(vo);
				System.out.println("[정보] 저장되었습니다.");
			} else if (selector == 2) {
				System.out.print("타율 > ");
				playerInfo.add(this.inputDouble());
				System.out.print("타수 > ");
				playerInfo.add(this.inputInteger());
				System.out.print("타점 > ");
				playerInfo.add(this.inputInteger());
				System.out.print("득점 > ");
				playerInfo.add(this.inputInteger());
				
				vo = new Batter(playerInfo);
				manager.insertPlayer(vo);
				System.out.println("[정보] 저장되었습니다.");
			}
		}
	}

	/**
	 * 선수 정보 삭제
	 */
	public void delete() throws InputMismatchException {
		System.out.print("** 삭제할 선수 번호 > ");
		String id = this.inputString();
		boolean flag = manager.deletePlayer(id);

		if (flag) {
			System.out.println("[정보] 삭제되었습니다.");
		} else {
			System.out.println("[정보] 삭제 대상이 존재하지 않습니다.");
		}
	}

	/**
	 * 선수 정보 수정
	 */
	public void update() throws InputMismatchException {
		System.out.print("** 수정할 선수 번호 > ");
		String id = this.inputString();
		Player vo = manager.searchId(id);

		if (vo == null || "".equals(vo.getId())) {
			System.out.println("[오류] 해당 번호의 선수 정보가 없습니다.");
		} else {
			System.out.print("수정할 선수 연봉 > ");
			vo.setSalary(input.nextInt());
			manager.updatePlayer(vo);
		}
	}

	/**
	 * 선수 정보 검색
	 */
	public void search() throws InputMismatchException {
		int selector = -1;
		System.out.println("[\t검색\t]");
		System.out.println("1. 전체");
		System.out.println("2. 투수");
		System.out.println("3. 타자");
		System.out.println("4. 베스트 플레이어");
		System.out.println("5. 연봉 검색");
		System.out.print("** 메뉴 선택 > ");
		selector = this.inputInteger();
		
		List<Player> list = null;
		if(selector >=1 && selector<=3) {
			list = manager.playerListForType(selector);
			
			
		} else if (selector == 4) {
			list= manager.bestPlayers();
		} else if (selector == 5) {
			System.out.print("최저 연봉: ");
			int minSalary = input.nextInt();
			System.out.print("최고 연봉: ");
			int maxSalary = input.nextInt();
			list = manager.playerListForSalary(minSalary, maxSalary);
		}
		this.print(list);
	}

	/**
	 * 목록 출력
	 * @param list
	 */
	public void print(List<Player> list) {		
		if (list == null || list.isEmpty()) {
			System.out.println("검색 결과가 없습니다.");
		} else {
			for (Player vo : list) {
				System.out.println(vo);
			}
			System.out.println("총 " + list.size() + "건의 검색 결과가 있습니다.");
		}
	}
	/**
	 * input 메서드
	 * @return int type
	 */
	public int inputInteger() {
		int integer = -1;
		
		try {
			integer = input.nextInt();
			input.nextLine();
		} catch (InputMismatchException e) {
			input.nextLine();
			throw e;
		}
		
		return integer;
	}
	
	/**
	 * Input 메서드
	 * @return String type
	 */
	public String inputString() {
		String str = "";
		
		try {
			str = input.nextLine();
		} catch (InputMismatchException e) {
			throw e;
		}
		
		return str;
	}
	/**
	 * Input 메서드
	 * @return double type
	 */
	public double inputDouble() {
		double dub = -1;
		
		try {
			dub = input.nextDouble();
			input.nextLine();
		} catch (InputMismatchException e) {
			input.nextLine();
			throw e;
		}
		
		return dub;
	}
	
	/**
	 * 프로그램 종료
	 */
	public void exit() {
		System.out.println("프로그램을 종료합니다.");
	}

}
```

## VO package

### Player (Parent class)

```java
package global.sesoc.baseball.vo;

import java.util.List;

/**
 * 선수 정보 VO 클래스들의 상위 클래스
 */
public class Player {
	/**
	 * 선수 고유 번호
	 */
	private String id;
	/**
	 * 선수 이름
	 */
	private String name;
	/**
	 * 소속 팀 정보
	 */
	private String team;
	/**
	 * 연봉
	 */
	private int salary;
	/**
	 * WAR
	 */
	private double war;
	
	/**
	 * default constructor
	 */
	public Player() {
		
	}
	/**
	 * specific constructor
	 */
	public Player(List<Object> playerInfo) {
		// id, 선수이름, 소속팀, 연봉, War
		this.id = (String) playerInfo.get(0);
		this.name = (String) playerInfo.get(1);
		this.team = (String) playerInfo.get(2);
		this.salary = (Integer) playerInfo.get(3);
		this.war = (Double) playerInfo.get(4);
	}
	
	/*
	 * toString Override
	 */
	@Override
	public String toString() {
		String output = "";
		StringBuffer buf = new StringBuffer();
		buf.append("ID:");
		buf.append(this.getId());
		buf.append(", 이름:");
		buf.append(this.getName());
		buf.append(", 소속팀:");
		buf.append(this.getTeam());
		buf.append(", 연봉:");
		buf.append(this.getSalary());
		buf.append(", WAR:");
		buf.append(this.getWar());
		return output;
	}
	/**
	 * Getter and Setter
	 */
	public void setId(String id) {
		this.id = id;
	}

	public void setName(String name) {
		this.name = name;
	}

	public void setTeam(String team) {
		this.team = team;
	}

	public void setSalary(int salary) {
		this.salary = salary;
	}

	public void setWar(double war) {
		this.war = war;
	}

	public String getId() {
		return id;
	}

	public String getName() {
		return name;
	}

	public String getTeam() {
		return team;
	}

	public int getSalary() {
		return salary;
	}

	public double getWar() {
		return war;
	}
	
}
```

### Pitcher (Child class)

```java
package global.sesoc.baseball.vo;

import java.util.List;

/**
 * 투수 정보 VO
 */
public class Pitcher extends Player  {
	/**
	 * 평균 자책
	 */
	private double era;	
	/**
	 * 이닝
	 */
	private int inning;
	/**
	 * 승
	 */
	private int wins;
	/**
	 * 패
	 */
	private int losses;	
	/**
	 * 세이브
	 */
	private int save;
	/**
	 * 홀드
	 */
	private int hold;
	/**
	 * default constructor
	 */
	public Pitcher() {
		
	}
	/**
	 * specific constructor
	 */
	public Pitcher(List<Object> playerInfo) {
		super(playerInfo);
		this.era = (Double) playerInfo.get(5);
		this.inning = (Integer) playerInfo.get(6);
		this.wins = (Integer) playerInfo.get(7);
		this.losses = (Integer) playerInfo.get(8);
		this.save = (Integer) playerInfo.get(9);
		this.hold = (Integer) playerInfo.get(10);
	}
	
	/**
	 * 선수의 정보를 출력하는 기능을 수행하는 메소드. toString의 오버라이딩 
	 */
	@Override
	public String toString() {
		StringBuffer buf = new StringBuffer();
		buf.append("ID: ");
		buf.append(this.getId());
		buf.append(", 이름: ");
		buf.append(this.getName());
		buf.append(", 소속팀: ");
		buf.append(this.getTeam());
		buf.append(", 연봉: ");
		buf.append(this.getSalary());
		buf.append(", WAR: ");
		buf.append(this.getWar());
		buf.append(", 이닝: ");
		buf.append(this.getInning());
		buf.append(", 승: ");
		buf.append(this.getWins());
		buf.append(", 패: ");
		buf.append(this.getLosses());
		buf.append(", 세이브: ");
		buf.append(this.getSave());
		buf.append(", 홀드: ");
		buf.append(this.getHold());
		
		return buf.toString();
	}
	
	/**
	 * Setter and Getter
	 * @param era
	 */
	public void setEra(double era) {
		this.era = era;
	}
	public void setInning(int inning) {
		this.inning = inning;
	}
	public void setWins(int wins) {
		this.wins = wins;
	}
	public void setLosses(int losses) {
		this.losses = losses;
	}
	public void setSave(int save) {
		this.save = save;
	}
	public void setHold(int hold) {
		this.hold = hold;
	}
	public double getEra() {
		return era;
	}
	public int getInning() {
		return inning;
	}
	public int getWins() {
		return wins;
	}
	public int getLosses() {
		return losses;
	}
	public int getSave() {
		return save;
	}
	public int getHold() {
		return hold;
	}
}
```

### Batter (Child class)

```java
package global.sesoc.baseball.vo;

import java.util.List;

/**
 * 타자 정보 VO
 */
public class Batter extends Player {
	/**
	 * 타율
	 */
	private double average;
	/**
	 * 타수
	 */
	private int atbat;
	/**
	 * 타점
	 */
	private int rbi;
	/**
	 * 득점
	 */
	private int score;
	/**
	 * Default constructor
	 */
	public Batter() {
		
	}
	
	/**
	 * Specific constructor
	 */
	public Batter(List<Object> playerInfo) {
		super(playerInfo);
		this.average = (Double) playerInfo.get(5);
		this.atbat = (Integer) playerInfo.get(6);
		this.rbi = (Integer) playerInfo.get(7);
		this.score = (Integer) playerInfo.get(8);
	}
	
	/**
	 * 선수의 정보를 출력하는 메소드. toStirng의 오버라이딩
	 */
	@Override
	public String toString() {
		StringBuffer buf = new StringBuffer();
		buf.append("ID: ");
		buf.append(this.getId());
		buf.append(", 이름: ");
		buf.append(this.getName());
		buf.append(", 소속팀: ");
		buf.append(this.getTeam());
		buf.append(", 연봉: ");
		buf.append(this.getSalary());
		buf.append(", WAR: ");
		buf.append(this.getWar());
		buf.append(", 타율: ");
		buf.append(this.getAverage());
		buf.append(", 타수: ");
		buf.append(this.getAtbat());
		buf.append(", 타점: ");
		buf.append(this.getRbi());
		buf.append(", 득점: ");
		buf.append(this.getScore());
		
		return buf.toString();
	}
	
	/**
	 * Getter and Setter
	 * @return
	 */
	public double getAverage() {
		return average;
	}
	public void setAverage(double average) {
		this.average = average;
	}
	public int getAtbat() {
		return atbat;
	}
	public void setAtbat(int atbat) {
		this.atbat = atbat;
	}
	public int getRbi() {
		return rbi;
	}
	public void setRbi(int rbi) {
		this.rbi = rbi;
	}
	public int getScore() {
		return score;
	}
	public void setScore(int score) {
		this.score = score;
	}
}
```

## Manage Package

### Interfadce

```java
package global.sesoc.baseball.manager;

import java.util.List;

import global.sesoc.baseball.vo.Player;

/**
 * BaseballManager에서 구현할 인터페이스 정의
 */
public interface AbstractBaseballManager {
	
	/**
	 * 전달받은 번호를 리스트에서 검색한다. 
	 * @param id 검색할 선수 번호
	 * @return 있으면 선수 정보, 없으면 null
	 */
	public Player searchId(String id);

	/**
	 * 전달받은 Player객체를 리스트에 추가저장한다.
	 * @param player 리스트에 추가할 Player객체
	 * @return 중복되지 않은 번호를 가진 정보가 리스트에 추가되면 true, 그렇지 않으면 false
	 */
	public boolean insertPlayer(Player player);
	
	/**
	 * 선수 번호를 이용해 해당 선수 정보를 리스트에서 삭제하고 true를 리턴한다.
	 * 없는 선수 번호인 경우에는 false를 리턴한다.
	 * @param id 삭제할 선수 번호
	 * @return boolean 삭제 여부 리턴 (삭제 완료 시 true, 삭제 실패 시 false)
	 */
	public boolean deletePlayer(String id);
	
	/**
	 * 선수 번호와 연봉을 전달받아 해당 선수의 연봉을 수정한다.
	 * @param player 수정할 연봉금액과 선수번호가 포함된 객체
	 * @return 수정 여부
	 */
	public boolean updatePlayer(Player player);
	
	/**
	 * 최소금액과, 최대금액을 전달받아 그 영역사이의  연봉을 받는 선수 목록을 리턴한다.
	 * @param minSalary 최소값
	 * @param maxSalary 최대값
	 * @return 지정한 금액 범위의 연봉을 받는 선수들의 목록
	 */
	public List<Player> playerListForSalary(int minSalary, int maxSalary);
	
	/**
	 * WAR기준으로 가장 높은 선수목록을 출력한다. 같은 값이 여러 명인 경우에는 모두.
	 * @return 선수 목록
	 */
	public List<Player> bestPlayers();
	
	/**
	 * 전달된 타입의 선수목록을 리턴한다.
	 * @param 선수 타입 (1:전체 2:투수 3:타자)
	 * @return 검색된 선수 목록
	 */
	public List<Player> playerListForType(int type);
	
}
```

### Manager Class

```java
package global.sesoc.baseball.manager;

import java.util.ArrayList;
import java.util.List;

import global.sesoc.baseball.vo.Batter;
import global.sesoc.baseball.vo.Pitcher;
import global.sesoc.baseball.vo.Player;

/**
 * 데이터의 처리를 담당
 */
public class BaseballManager implements AbstractBaseballManager {
	/**
	 * 선수 정보를 저장할 리스트
	 */
	private List<Player> playerList;

	/**
	 * 생성자
	 */
	public BaseballManager() {
		// 기존 저장된 파일이 있으면 열어서 읽는다.
		// 저장된 파일이 없으면 새로운 리스트를 생성한다.
		this.playerList = new ArrayList<>();
	}
	/**
	 * 선수 전체 리스트의 사이즈가 0인 경우 리턴값은 null이 된다. 선수리스트의 사이즈가 0이 아닌 경우
	 * id와 일치하는 선수를 탐색한다 (for 문). if문을 통해 결과가 있으면 vo에 그 객체를 넣어준다.
	 * 일치하는 선수(객체)가 없으면 리턴값은 아무것도 넣지 않았으므로 마찬가지로 null이다.
	 * 
	 * @return Player 객체
	 */
	@Override
	public Player searchId(String id) {
		Player vo = null;

		if (!playerList.isEmpty()) { // 선수의 전체 리스트의 사이즈가 0이 아닌 경우
			for (Player search : playerList) {
				if (id.equals(search.getId())) {
					vo = search;
					break;
				}
			}
		} 
		
		return vo;
	}
	/**
	 * 플레이어 객체를 list에 넣어주는 기능을 수행한다.
	 * @return boolean -> 추가되지 못하면 false 추가되면 true를 반환 *
	 */
	@Override
	public boolean insertPlayer(Player player) {
		boolean flag = false;

		if (this.searchId(player.getId()) != null) {
			flag = false; // 중복값이 있는 경우로 추가 하면 안됨.
		} else {
			playerList.add(player);
			flag = true; // 추가 됨
		}

		return flag;
	}
	/**
	 * id에 일치하는 선수를 list에서 삭제하는 기능을 수행한다.
	 * @return boolean 삭제에 성공하면 true 실패하면 false를 반환.
	 */
	@Override
	public boolean deletePlayer(String id) {
		Player vo = this.searchId(id);
		boolean flag = false; // 삭제되지 않음을 의미.

		if (vo != null) {
			int index = 0;
			for (Player search : playerList) {
				if (id.equals(search.getId())) {
					flag = true;
					break;
				}
				index++;
			}
			this.playerList.remove(index);
		}

		return flag;
	}
	
	/**
	 * id가 일치하는 플레이어의 연봉을 수정하는 기능을 수행하는 메소드
	 * @return boolean 플레이어를 찾을 수 없을 경우 false, 찾아내어 수정에 성공하면 true.
	 */
	@Override
	public boolean updatePlayer(Player player) {
		boolean flag = false;

		String targetName = player.getName();
		int index = 0;
		if (!this.playerList.isEmpty()) {
			flag = true;
			for (Player vo : playerList) {
				if (targetName.equals(vo.getName())) {
					break;
				}
				index++;
			}
		}

		this.playerList.set(index, player);

		return flag;
	}
	/**
	 * 해당 연봉 범위에 있는 플레이어들의 리스트를 만들어 반환하는 기능을 수행하는 메소드.
	 * @return List<Player> 객체, 연봄 범위 안에 있는 모든 선수가 담겨 있다.
	 */
	@Override
	public List<Player> playerListForSalary(int minSalary, int maxSalary) {
		List<Player> result = new ArrayList<>();

		if (!playerList.isEmpty()) {
			for (Player vo : playerList) {
				if (minSalary <= vo.getSalary() && maxSalary >= vo.getSalary()) {
					result.add(vo);
				}
			}
		} else {
			result = null;
		}
		return result;
	}
	/**
	 * 각 포지션별로 War가 가장 높은 선수들을 list에 담아서 반환하는 기능을 수행하는 메소드.
	 * @return List<Player> 각 포지션 별 베스트 플레이어들이 담겨 있는 list객체
	 */
	@Override
	public List<Player> bestPlayers() {
		double[] maxWar = new double[2];
		List<Player> listPitcher = this.playerListForType(2);
		List<Player> listBatter = this.playerListForType(3);
		List<Player> result = new ArrayList<>();
		
		if (!playerList.isEmpty()) {
			for (Player vo : listPitcher) {
				if (maxWar[0] < vo.getWar()) {
					maxWar[0] = vo.getWar();
				}
			}
			
			for (Player vo : listBatter) {
				if (maxWar[1] < vo.getWar()) {
					maxWar[1] = vo.getWar();
				}
			}

			for (Player vo : listPitcher) {
				if (vo.getWar() == maxWar[0]) {
					result.add(vo);
				}
			}
			
			for (Player vo : listBatter) {
				if (vo.getWar() == maxWar[1]) {
					result.add(vo);
				}
			}
			
		} else {
			result = null;
		}

		return result;
	}
	
	/**
	 * 포지션을 선택하면 그 포지션에 해당하는 선수의 리스트를 반환하는 기능을 수행하는 메소드
	 * @param type --> 1인 경우 전체리스트 2인 경우 Pitcher 리스트 3인 경우 batter 리스트를 의미함
	 * @return List<Player> 포지션에 해당하는 선수들이 담긴 list 객체 
	 */
	@Override
	public List<Player> playerListForType(int type) {
		List<Player> list = new ArrayList<>();

		if (!playerList.isEmpty()) {
			if (type == 1) {
				list = this.playerList;
			} else if (type == 2) {
				for (Player vo : playerList) {
					if (vo instanceof Pitcher) {
						list.add(vo);
					}
				}
			} else if (type == 3) {
				for (Player vo : playerList) {
					if (vo instanceof Batter) {
						list.add(vo);
					}
				}
			}
		} else {
			list = null;
		}

		return list;
	}

	/**
	 * Getter
	 * 선수 전체가 담긴 리스트를 반환하는 기능을 수행
	 * @return ArrayList<Player> 선수 전체가 담긴 리스트
	 */
	public List<Player> getPlayerList() {
		return playerList;
	}
}
```